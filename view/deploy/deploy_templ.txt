<div class=\"flex\">
<div class=\"container mx-auto px-4 py-8\"><h1 class=\"text-3xl font-bold text-gray-800 mb-6\">Deploy New Spider</h1><div class=\"bg-white shadow-md rounded-lg overflow-hidden\"><div class=\"p-6\"><form id=\"deploySpiderForm\" hx-post=\"/deploy\"><div class=\"mb-6\"><label for=\"domainSelect\" class=\"block text-sm font-medium text-gray-700 mb-2\">Select Website Domain</label> <select id=\"domainSelect\" name=\"domainSelect\" hx-get=\"?action=get-configs\" hx-trigger=\"change\" hx-target=\"#configSelect\" hx-swap=\"innerHTML\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"None\">Choose a domain</option> 
<option value=\"
\">
</option>
</select></div><div class=\"mb-6\"><label for=\"configSelect\" class=\"block text-sm font-medium text-gray-700 mb-2\">Select Configuration</label> <select id=\"configSelect\" name=\"configSelect\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"\">Choose a configuration</option></select></div><div class=\"mb-6\"><label for=\"proxies\" class=\"block text-sm font-medium text-gray-700\">Select Proxies</label><div class=\"relative\"><div id=\"proxy-list-continer\" class=\"space-y-2\" hx-get=\"?action=get-proxies\" hx-trigger=\"load\"><div class=\"h-32 w-full bg-gray-200 rounded animate-pulse\"></div><div class=\"p-4 bg-yellow-100 rounded-md space-y-2\"><div class=\"h-4 w-56 bg-yellow-200 rounded animate-pulse\"></div><div class=\"h-3 w-72 bg-yellow-200 rounded animate-pulse\"></div></div></div></div><div id=\"selectedProxies\" class=\"mt-2 flex flex-wrap gap-2\"></div><input type=\"hidden\" id=\"selectedProxiesInput\" name=\"selectedProxies\" value=\"\"></div><div class=\"mb-6\"><div id=\"parseModal\" class=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden opacity-0 transition-opacity duration-300 z-50\"><div class=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white transform transition-all duration-300 -translate-y-full scale-95 opacity-0 z-50\"><div class=\"mt-3 text-center\"><h3 class=\"text-lg leading-6 font-medium text-gray-900\">Confirm Deletion</h3><div class=\"mt-2 px-7 py-3\"><input type=\"text\" id=\"header-input\" class=\"w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:border-blue-500\" placeholder=\"cookie1=value1; cookie2=value2; cookie3=value3\"></div><div class=\"items-center px-4 py-3\">
<button type=\"button\" onClick=\"
\" class=\"px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-300 transition duration-300\">Parse Header</button> 
<button type=\"button\" onClick=\"
\" class=\"mt-3 px-4 py-2 bg-white text-gray-700 text-base font-medium rounded-md w-full shadow-sm border border-gray-300 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300 transition duration-300\">Cancel</button></div></div></div></div><label for=\"json-input\" class=\"block text-sm font-medium text-gray-700 mb-2\">Cookie JSON (Opsional)</label> <textarea id=\"json-input\" rows=\"6\" class=\"w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:border-blue-500 font-mono\" placeholder=\"{\r\n  &#34;cookie_1&#34;: &#34;value_1&#34;,\r\n  &#34;cookie_2&#34;: &#34;value_2&#34;,\r\n  &#34;cookie_3&#34;: &#34;value_3&#34;,\r\n  &#34;cookie_4&#34;: &#34;value_4&#34;,\r\n}\r\n\"></textarea><div class=\"mb-6\"><div class=\"flex space-x-4\">
<button type=\"button\" onClick=\"
\" class=\"flex-1 bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 focus:outline-none focus:shadow-outline\">Parse JSON</button> 
<button type=\"button\" onClick=\"
\" class=\"flex-1 bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 focus:outline-none focus:shadow-outline\">Parse Header</button></div><div id=\"result\" class=\"mt-6 p-4 bg-gray-100 rounded-lg hidden\"><h3 class=\"text-lg font-semibold mb-2\">Parsed Cookies:</h3><pre id=\"parsed-cookies\" class=\"whitespace-pre-wrap break-words\"></pre><input type=\"hidden\" id=\"cookies-input\" name=\"cookies\"></div></div></div><div class=\"mb-6\"><label for=\"outputDestination\" class=\"block text-sm font-medium text-gray-700 mb-2\">Output Destination</label> <select id=\"outputDestination\" name=\"outputDestination\" hx-get=\"?action=get-additional-output-settings\" hx-trigger=\"change\" hx-target=\"#additionalOutputSettings\" required class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"\">Choose an output destination</option> <option value=\"local\">Local</option> <option value=\"kafka\">Kafka</option></select></div><div class=\"mb-6\" id=\"additionalOutputSettings\" name=\"additionalOutputSettings\"></div><div class=\"mb-6\"><label class=\"text-base font-medium text-gray-900\">Deployment Time</label><p class=\"text-sm text-gray-500\">Choose when to deploy the spider</p><fieldset class=\"mt-4\"><div class=\"space-y-4 sm:flex sm:items-center sm:space-y-0 sm:space-x-10\"><div class=\"flex items-center\"><input id=\"run-now\" name=\"deploymentTime\" type=\"radio\" value=\"now\" checked class=\"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500\"> <label for=\"run-now\" class=\"ml-3 block text-sm font-medium text-gray-700\">Run Now</label></div><div class=\"flex items-center\"><input id=\"schedule\" name=\"deploymentTime\" type=\"radio\" value=\"schedule\" class=\"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500\"> <label for=\"schedule\" class=\"ml-3 block text-sm font-medium text-gray-700\">Schedule Run</label></div></div></fieldset></div><div id=\"scheduleOptions\" class=\"mb-6 hidden\"><div class=\"space-y-6\"><div><label class=\"text-base font-medium text-gray-900\">Schedule Type</label><p class=\"text-sm text-gray-500\">Choose between simple or advanced scheduling</p><div class=\"mt-4 flex rounded-md shadow-sm\" role=\"group\" aria-label=\"Schedule Type\"><button type=\"button\" id=\"simpleSchedule\" class=\"px-4 py-2 text-sm font-medium text-indigo-700 bg-indigo-100 border border-indigo-300 rounded-l-lg hover:bg-indigo-200 focus:z-10 focus:ring-2 focus:ring-indigo-500 focus:bg-indigo-200 focus:text-indigo-800\" aria-pressed=\"true\">Simple</button> <button type=\"button\" id=\"advancedSchedule\" class=\"px-4 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-r-lg hover:bg-gray-100 hover:text-indigo-700 focus:z-10 focus:ring-2 focus:ring-indigo-500 focus:bg-indigo-200 focus:text-indigo-800\">Advanced</button></div></div><div id=\"simpleScheduleOptions\"><label for=\"simpleFrequency\" class=\"block text-sm font-medium text-gray-700\">Frequency</label> <select id=\"simpleFrequency\" name=\"simpleFrequency\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"hourly\">Hourly</option> <option value=\"daily\">Daily</option> <option value=\"weekly\">Weekly</option> <option value=\"monthly\">Monthly</option></select></div><div id=\"advancedScheduleOptions\" class=\"hidden\"><div class=\"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6\"><div class=\"sm:col-span-2\"><label for=\"minute\" class=\"block text-sm font-medium text-gray-700\">Minute</label> <select id=\"minute\" name=\"minute\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"*\">Every minute</option><script>\r\n                                                                for (let i = 0; i < 60; i++) {\r\n                                                                    document.write(`<option value=\"${i}\">${i.toString().padStart(2, '0')}</option>`);\r\n                                                                }\r\n                                                            </script></select></div><div class=\"sm:col-span-2\"><label for=\"hour\" class=\"block text-sm font-medium text-gray-700\">Hour</label> <select id=\"hour\" name=\"hour\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"*\">Every hour</option><script>\r\n                                                                for (let i = 0; i < 24; i++) {\r\n                                                                    document.write(`<option value=\"${i}\">${i.toString().padStart(2, '0')}</option>`);\r\n                                                                }\r\n                                                            </script></select></div><div class=\"sm:col-span-2\"><label for=\"dayOfMonth\" class=\"block text-sm font-medium text-gray-700\">Day of Month</label> <select id=\"dayOfMonth\" name=\"dayOfMonth\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"*\">Every day</option><script>\r\n                                                                for (let i = 1; i <= 31; i++) {\r\n                                                                    document.write(`<option value=\"${i}\">${i}</option>`);\r\n                                                                }\r\n                                                            </script></select></div><div class=\"sm:col-span-3\"><label for=\"month\" class=\"block text-sm font-medium text-gray-700\">Month</label> <select id=\"month\" name=\"month\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"*\">Every month</option> <option value=\"1\">January</option> <option value=\"2\">February</option> <option value=\"3\">March</option> <option value=\"4\">April</option> <option value=\"5\">May</option> <option value=\"6\">June</option> <option value=\"7\">July</option> <option value=\"8\">August</option> <option value=\"9\">September</option> <option value=\"10\">October</option> <option value=\"11\">November</option> <option value=\"12\">December</option></select></div><div class=\"sm:col-span-3\"><label for=\"dayOfWeek\" class=\"block text-sm font-medium text-gray-700\">Day of Week</label> <select id=\"dayOfWeek\" name=\"dayOfWeek\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\"><option value=\"*\">Every day</option> <option value=\"0\">Sunday</option> <option value=\"1\">Monday</option> <option value=\"2\">Tuesday</option> <option value=\"3\">Wednesday</option> <option value=\"4\">Thursday</option> <option value=\"5\">Friday</option> <option value=\"6\">Saturday</option></select></div></div></div><div><label for=\"cronExpression\" class=\"block text-sm font-medium text-gray-700\">Generated Cron Expression</label><div class=\"mt-1 flex rounded-md shadow-sm\"><span class=\"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-50 px-3 text-gray-500 sm:text-sm\">Cron:</span> <input type=\"text\" id=\"cronExpression\" name=\"cronExpression\" class=\"block w-full flex-1 rounded-none rounded-r-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" readonly></div><p class=\"mt-2 text-sm text-gray-500\">This is the cron expression generated from your selections above.</p></div><div><label for=\"nextRunTime\" class=\"block text-sm font-medium text-gray-700\">Next Run Time</label><div class=\"mt-1\"><input type=\"text\" id=\"nextRunTime\" name=\"nextRunTime\" class=\"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" readonly></div><p class=\"mt-2 text-sm text-gray-500\">This is when the spider will next run based on the current schedule.</p></div></div></div><div class=\"mb-6\"><label for=\"customSettings\" class=\"block text-sm font-medium text-gray-700 mb-2\">Additional Spider Custom Settings (JSON)</label> <textarea id=\"customSettings\" name=\"customSettings\" rows=\"4\" class=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500\" placeholder=\"{&#34;DOWNLOAD_DELAY&#34;: 1, &#34;CONCURRENT_REQUESTS&#34;: 16}\"></textarea><p class=\"mt-1 text-sm text-gray-500\">Enter any additional settings in JSON format</p></div><div class=\"flex items-center justify-between\"><button id=\"submitButton\" type=\"submit\" class=\"bg-blue-500 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed\">Deploy Spider</button></div></form></div></div></div></div><script>\r\n\t\t\tdocument.body.addEventListener('htmx:beforeRequest', function(event) {\r\n\t\t\tif (event.target && event.target.id == \"deploySpiderForm\") {\r\n\t\t\t\tdocument.getElementById('submitButton').disabled = true;\r\n\t\t\t\tdocument.getElementById('submitButton').textContent = 'Submitting...';\r\n\t\t\t}\r\n\t\t\t});\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\r\n\t\t\t\tconst outputDestination = document.getElementById('outputDestination');\r\n\t\t\t\tconst kafkaConfig = document.getElementById('kafkaConfig');\r\n\t\t\t\tconst deploymentTimeRadios = document.getElementsByName('deploymentTime');\r\n\t\t\t\tconst scheduleOptions = document.getElementById('scheduleOptions');\r\n\t\t\t\tconst simpleScheduleButton = document.getElementById('simpleSchedule');\r\n\t\t\t\tconst advancedScheduleButton = document.getElementById('advancedSchedule');\r\n\t\t\t\tconst simpleScheduleOptions = document.getElementById('simpleScheduleOptions');\r\n\t\t\t\tconst advancedScheduleOptions = document.getElementById('advancedScheduleOptions');\r\n\t\t\t\tconst simpleFrequency = document.getElementById('simpleFrequency');\r\n\t\t\t\tconst cronExpression = document.getElementById('cronExpression');\r\n\t\t\t\tconst nextRunTime = document.getElementById('nextRunTime');\r\n\t\t\t\tconst advancedInputs = ['minute', 'hour', 'dayOfMonth', 'month', 'dayOfWeek'];\r\n\r\n\t\t\t\toutputDestination.addEventListener('change', function() {\r\n\t\t\t\t\tkafkaConfig.classList.toggle('hidden', this.value !== 'kafka');\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdeploymentTimeRadios.forEach(radio => {\r\n\t\t\t\t\tradio.addEventListener('change', function() {\r\n\t\t\t\t\t\tscheduleOptions.classList.toggle('hidden', this.id === 'run-now');\r\n\t\t\t\t\t\tupdateCronExpression();\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsimpleScheduleButton.addEventListener('click', function() {\r\n\t\t\t\t\tsimpleScheduleButton.classList.add('bg-indigo-100', 'text-indigo-700');\r\n\t\t\t\t\tsimpleScheduleButton.classList.remove('bg-white', 'text-gray-900');\r\n\t\t\t\t\tadvancedScheduleButton.classList.add('bg-white', 'text-gray-900');\r\n\t\t\t\t\tadvancedScheduleButton.classList.remove('bg-indigo-100', 'text-indigo-700');\r\n\t\t\t\t\tsimpleScheduleOptions.classList.remove('hidden');\r\n\t\t\t\t\tadvancedScheduleOptions.classList.add('hidden');\r\n\t\t\t\t\tupdateCronExpression();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tadvancedScheduleButton.addEventListener('click', function() {\r\n\t\t\t\t\tadvancedScheduleButton.classList.add('bg-indigo-100', 'text-indigo-700');\r\n\t\t\t\t\tadvancedScheduleButton.classList.remove('bg-white', 'text-gray-900');\r\n\t\t\t\t\tsimpleScheduleButton.classList.add('bg-white', 'text-gray-900');\r\n\t\t\t\t\tsimpleScheduleButton.classList.remove('bg-indigo-100', 'text-indigo-700');\r\n\t\t\t\t\tadvancedScheduleOptions.classList.remove('hidden');\r\n\t\t\t\t\tsimpleScheduleOptions.classList.add('hidden');\r\n\t\t\t\t\tupdateCronExpression();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsimpleFrequency.addEventListener('change', updateCronExpression);\r\n\r\n\t\t\t\tadvancedInputs.forEach(inputId => {\r\n\t\t\t\t\tdocument.getElementById(inputId).addEventListener('change', updateCronExpression);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfunction updateCronExpression() {\r\n\t\t\t\t\tlet expression = '';\r\n\r\n\t\t\t\t\tif (document.getElementById('schedule').checked) {\r\n\t\t\t\t\t\tif (!advancedScheduleOptions.classList.contains('hidden')) {\r\n\t\t\t\t\t\t\texpression = advancedInputs.map(inputId => document.getElementById(inputId).value || '*').join(' ');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst frequency = simpleFrequency.value;\r\n\t\t\t\t\t\t\tswitch (frequency) {\r\n\t\t\t\t\t\t\t\tcase 'hourly':\r\n\t\t\t\t\t\t\t\t\texpression = '0 * * * *';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'daily':\r\n\t\t\t\t\t\t\t\t\texpression = '0 0 * * *';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'weekly':\r\n\t\t\t\t\t\t\t\t\texpression = '0 0 * * 0';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase 'monthly':\r\n\t\t\t\t\t\t\t\t\texpression = '0 0 1 * *';\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\texpression = '* * * * *';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcronExpression.value = expression;\r\n\t\t\t\t\t\tupdateNextRunTime(expression);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcronExpression.value = 'Run immediately';\r\n\t\t\t\t\t\tnextRunTime.value = 'Immediately';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction updateNextRunTime(cronExpression) {\r\n\t\t\t\t\tconst now = new Date();\r\n\t\t\t\t\tnow.setMinutes(now.getMinutes() + 5);\r\n\t\t\t\t\tnextRunTime.value = now.toLocaleString();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdateCronExpression();\r\n\t\t\t});\r\n\t\t\tdocument.body.addEventListener('htmx:afterSwap', function(event) {\r\n\t\t\t\tif (event.target.id === \"proxy-list-continer\") {\r\n\t\t\t\t\tconst proxiesSelect = document.getElementById('proxies-list');\r\n\t\t\t\t\tconst selectedProxiesDiv = document.getElementById('selectedProxies');\r\n\t\t\t\t\tconst selectedProxiesInput = document.getElementById('selectedProxiesInput');\r\n\t\t\t\t\tfunction updateSelectedProxies() {\r\n\t\t\t\t\t\tselectedProxiesDiv.innerHTML = '';\r\n\t\t\t\t\t\tconst selectedValues = [];\r\n\t\t\t\t\t\tArray.from(proxiesSelect.selectedOptions).forEach(option => {\r\n\t\t\t\t\t\t\tconst badge = document.createElement('span');\r\n\t\t\t\t\t\t\tbadge.className = 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800';\r\n\t\t\t\t\t\t\tbadge.textContent = option.text;\r\n\r\n\t\t\t\t\t\t\tconst removeButton = document.createElement('button');\r\n\t\t\t\t\t\t\tremoveButton.className = 'ml-1 inline-flex items-center justify-center h-4 w-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:outline-none focus:bg-blue-500 focus:text-white';\r\n\t\t\t\t\t\t\tremoveButton.innerHTML = '&times;';\r\n\t\t\t\t\t\t\tremoveButton.setAttribute('aria-label', `Remove ${option.text}`);\r\n\t\t\t\t\t\t\tremoveButton.onclick = function() {\r\n\t\t\t\t\t\t\t\toption.selected = false;\r\n\t\t\t\t\t\t\t\tupdateSelectedProxies();\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tbadge.appendChild(removeButton);\r\n\t\t\t\t\t\t\tselectedProxiesDiv.appendChild(badge);\r\n\t\t\t\t\t\t\tselectedValues.push(option.value);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tselectedProxiesInput.value = selectedValues.join(',');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tproxiesSelect.addEventListener('change', updateSelectedProxies);\r\n\t\t\t\t\t}\r\n\t\t\t\telse if (event.target.id === \"additionalOutputSettings\") {\r\n\t\t\t\t\tconst dropdownToggle = document.getElementById('dropdown-toggle');\r\n\t\t\t\t\tconst dropdownContent = document.getElementById('dropdown-content');\r\n\t\t\t\t\tconst brokerSearch = document.getElementById('broker-search');\r\n\t\t\t\t\tconst selectAllBtn = document.getElementById('select-all-btn');\r\n\t\t\t\t\tconst selectedBrokers = document.getElementById('selectedBrokers');\r\n\t\t\t\t\tconst selectedCount = document.getElementById('selected-count');\r\n\t\t\t\t\tconst selectedBrokersInput = document.getElementById('selectedBrokersInput');\r\n\r\n\t\t\t\t\tfunction initBrokerList() {\r\n\t\t\t\t\t\tconst brokerList = document.getElementById('broker-list');\r\n\t\t\t\t\t\tbrokerList.addEventListener('change', updateSelectedBrokers);\r\n\t\t\t\t\t\tselectAllBtn.addEventListener('click', toggleSelectAll);\r\n\t\t\t\t\t\tdropdownToggle.addEventListener('click', toggleDropdown);\r\n\t\t\t\t\t\t// brokerSearch.addEventListener('input', filterBrokers);\r\n\t\t\t\t\t\tdocument.addEventListener('click', closeDropdownOutside);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction toggleDropdown() {\r\n\t\t\t\t\t\tdropdownContent.classList.toggle('hidden');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction closeDropdownOutside(event) {\r\n\t\t\t\t\t\tif (!dropdownToggle.contains(event.target) && !dropdownContent.contains(event.target)) {\r\n\t\t\t\t\t\t\tdropdownContent.classList.add('hidden');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// function filterBrokers() {\r\n\t\t\t\t\t// \tconst searchTerm = brokerSearch.value.toLowerCase();\r\n\t\t\t\t\t// \tconst brokerList = document.getElementById('broker-list');\r\n\t\t\t\t\t// \tconst brokerItems = brokerList.querySelectorAll('li');\r\n\r\n\t\t\t\t\t// \tbrokerItems.forEach(item => {\r\n\t\t\t\t\t// \t\tconst brokerText = item.textContent.toLowerCase();\r\n\t\t\t\t\t// \t\titem.style.display = brokerText.includes(searchTerm) ? '' : 'none';\r\n\t\t\t\t\t// \t});\r\n\t\t\t\t\t// }\r\n\r\n\t\t\t\t\tfunction updateSelectedBrokers() {\r\n\t\t\t\t\t\tconst brokerList = document.getElementById('broker-list');\r\n\t\t\t\t\t\tconst selectedCheckboxes = brokerList.querySelectorAll('input[type=\"checkbox\"]:checked');\r\n\t\t\t\t\t\tconst selectedBrokersArray = Array.from(selectedCheckboxes).map(checkbox => checkbox.value);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tupdateSelectedCount(selectedBrokersArray.length);\r\n\t\t\t\t\t\tupdateSelectAllButton();\r\n\t\t\t\t\t\tupdateSelectedBrokersUI(selectedBrokersArray);\r\n\t\t\t\t\t\tupdateHiddenInput(selectedBrokersArray);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction updateSelectedBrokersUI(selectedBrokersArray) {\r\n\t\t\t\t\t\tselectedBrokers.innerHTML = '';\r\n\r\n\t\t\t\t\t\tselectedBrokersArray.forEach(broker => {\r\n\t\t\t\t\t\t\tconst badge = document.createElement('span');\r\n\t\t\t\t\t\t\tbadge.className = 'inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800';\r\n\t\t\t\t\t\t\tbadge.textContent = broker;\r\n\r\n\t\t\t\t\t\t\tconst removeButton = document.createElement('button');\r\n\t\t\t\t\t\t\tremoveButton.className = 'ml-1 inline-flex items-center justify-center h-4 w-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:outline-none focus:bg-blue-500 focus:text-white';\r\n\t\t\t\t\t\t\tremoveButton.innerHTML = '&times;';\r\n\t\t\t\t\t\t\tremoveButton.setAttribute('aria-label', `Remove ${broker}`);\r\n\t\t\t\t\t\t\tremoveButton.onclick = function() {\r\n\t\t\t\t\t\t\t\tremoveBroker(broker);\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t\tbadge.appendChild(removeButton);\r\n\t\t\t\t\t\t\tselectedBrokers.appendChild(badge);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction removeBroker(broker) {\r\n\t\t\t\t\t\tconst brokerList = document.getElementById('broker-list');\r\n\t\t\t\t\t\tconst checkbox = brokerList.querySelector(`input[value=\"${broker}\"]`);\r\n\t\t\t\t\t\tif (checkbox) {\r\n\t\t\t\t\t\t\tcheckbox.checked = false;\r\n\t\t\t\t\t\t\tupdateSelectedBrokers();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction updateHiddenInput(selectedBrokersArray) {\r\n\t\t\t\t\t\tselectedBrokersInput.value = selectedBrokersArray.join(',');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction toggleSelectAll() {\r\n\t\t\t\t\t\tconst brokerList = document.getElementById('broker-list');\r\n\t\t\t\t\t\tconsole.log(brokerList)\r\n\t\t\t\t\t\tconst checkboxes = brokerList.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\t\t\tconst allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);\r\n\r\n\t\t\t\t\t\tcheckboxes.forEach(checkbox => {\r\n\t\t\t\t\t\t\tcheckbox.checked = !allChecked;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tupdateSelectedBrokers();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction updateSelectAllButton() {\r\n\t\t\t\t\t\tconst brokerList = document.getElementById('broker-list');\r\n\t\t\t\t\t\tconst checkboxes = brokerList.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\t\t\tconst allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);\r\n\r\n\t\t\t\t\t\tselectAllBtn.textContent = allChecked ? 'Deselect All' : 'Select All';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction updateSelectedCount(count) {\r\n\t\t\t\t\t\tselectedCount.textContent = count > 0 ? `${count} broker(s) selected` : 'Select Kafka Brokers';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tinitBrokerList();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t</script>
<select id=\"proxies-list\" required multiple class=\"block w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\"></select><div><div class=\"p-4 rounded-md bg-yellow-100 text-yellow-800\"><p class=\"text-sm font-medium\">No proxies available at the moment.</p><p class=\"mt-1 text-xs\">Please check the <a href=\"/proxies\" class=\"underline font-medium hover:text-yellow-900\">proxy status page</a> for available proxy information.</p></div></div>
<select id=\"proxies-list\" required multiple class=\"block w-full rounded-md border border-gray-300 bg-gray-50 px-3 py-2 text-gray-900 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500\">
<option value=\"
\">
</option>
</select><p class=\"text-xs text-gray-500\">Hold Ctrl (Windows) or Command (Mac) to select multiple proxies</p>
<option value=\"\">Choose a configuration</option> 
<option value=\"
\">
</option>
<li class=\"px-3 py-2 hover:bg-gray-100\"><label class=\"flex items-center space-x-3\"><input type=\"checkbox\" class=\"form-checkbox h-5 w-5 text-blue-600\" value=\"
\"> <span>
 | 
:
</span></label></li>
<div id=\"kafkaConfig\" class=\"mb-6 \"><h3 class=\"text-lg font-medium text-gray-700 mb-4\">Kafka Configuration</h3><div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\"><div class=\"relative\"><label for=\"broker-dropdown\" class=\"block text-sm font-medium text-gray-700 mb-2\">Kafka Brokers</label><div id=\"broker-dropdown\" class=\"relative\"><button id=\"dropdown-toggle\" type=\"button\" class=\"bg-white w-full flex items-center justify-between rounded-md border border-gray-300 px-4 py-2 text-left text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"><span id=\"selected-count\">Select Kafka Brokers</span> <svg class=\"h-5 w-5 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fill-rule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path></svg></button><div id=\"dropdown-content\" class=\"hidden absolute left-0 right-0 mt-2 rounded-md bg-white shadow-lg z-10\"><div class=\"p-2\"><input type=\"text\" placeholder=\"Search brokers...\" hx-get=\"?action=query-broker\" hx-trigger=\"keyup changed delay:500ms, focus\" hx-target=\"#broker-list\" name=\"q\" class=\"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" id=\"broker-search\"></div><div class=\"px-2 py-1 border-b\"><button type=\"button\" id=\"select-all-btn\" class=\"w-full px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\">Select All</button></div><div class=\"max-h-60 overflow-y-auto\"><ul class=\"py-1\" id=\"broker-list\">
</ul></div></div><div id=\"selectedBrokers\" class=\"mt-2 flex flex-wrap gap-2\"></div><input type=\"hidden\" id=\"selectedBrokersInput\" name=\"selectedBrokers\" value=\"\"></div></div><div><label for=\"kafka-topics\" class=\"block text-sm font-medium text-gray-700 mb-2\">Kafka Topics</label> <input name=\"kafkaTopic\" id=\"kafkaTopic\" class=\"w-full px-3 py-2 text-gray-700 border rounded-lg focus:outline-none focus:border-blue-500\"></div></div></div>
